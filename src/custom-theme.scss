@use '@angular/material' as mat;

.mat-drawer,
.mat-drawer-container {
  transition: background 300ms 
    cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 280ms 
    cubic-bezier(0.4, 0, 0.2, 1);
}

// ----------------------------------------------
// Theme Colors and Typography
// ----------------------------------------------
$light-theme: (
        background: white,
        text: black,
        link: blue,
);

$custom-dark-theme: (
        background: #2c2c2c,
        text: #e0e0e0,
        link: #bb86fc,
);

$custom-typography: mat.define-typography-level(
        $font-family: montserrat,
        $font-weight: 400,
        $font-size: 1rem,
        $line-height: 1,
        $letter-spacing: normal
);
@include mat.core($custom-typography);

// ----------------------------------------------
// Angular Material Palettes
// ----------------------------------------------
$DSOMM-primary: mat.define-palette(mat.$green-palette, 400);
$DSOMM-accent: mat.define-palette(mat.$pink-palette, A200, A100, A400);
$DSOMM-warn: mat.define-palette(mat.$red-palette);

$DSOMM-dark-primary: mat.define-palette(mat.$green-palette, 600);

// ----------------------------------------------
// Angular Material Themes
// ----------------------------------------------
$DSOMM-light-theme: mat.define-light-theme((
        color: (
                primary: $DSOMM-primary,
                accent: $DSOMM-accent,
                warn: $DSOMM-warn
        )
));

$DSOMM-dark-theme: mat.define-dark-theme((
        color: (
                primary: $DSOMM-dark-primary,
                accent: $DSOMM-accent,
                warn: $DSOMM-warn
        )
));

// ----------------------------------------------
// Base Theme Mixin
// ----------------------------------------------
@mixin apply-theme($theme) {
  background-color: map-get($theme, background);
  color: map-get($theme, text);

  a {
    color: map-get($theme, link);
  }
  a:visited {
    color: map-get($theme, visited-link);
  }
}

// ----------------------------------------------
// Light Mode Styles
// ----------------------------------------------
body {

  .title-button,
  h1, h2, h3, h4, h5, h6 {
    color: map-get($light-theme, text);
  }
}

.light-theme {
  --text-primary: #000000;
  --text-secondary: #666666;
  --text-tertiary: #bbbbbb;
  --background-primary: #f5f5f5;
  --background-secondary: #fefefe;
  --background-tertiary: #f8f9fa;

  --primary-color: #{mat.get-color-from-palette($DSOMM-primary)};

  --heatmap-filled: #4caf50;
  --heatmap-disabled: #dddddd;
  --heatmap-background: white;
  --heatmap-stroke: black;
  --heatmap-cursor-hover: #1c8b1c;
  --heatmap-cursor-selected:#3d3d3d;

  --dependency-link: #707070;
  --dependency-border: #222222;
  --dependency-mainnode-fill: #4caf50;
  --dependency-predecessor-fill: #deeedeff; 
  --dependency-successor-fill: #fdfdfdff;

  @include mat.all-component-themes($DSOMM-light-theme);
}

// ----------------------------------------------
// Dark Mode Styles
// ----------------------------------------------
body.dark-theme {
  @include apply-theme($custom-dark-theme);
  @include mat.all-component-themes($DSOMM-dark-theme);
  
  --text-primary: #fefefe;
  --text-secondary: #ababab;
  --text-tertiary: #999999;
  --background-primary: #303030;
  --background-secondary: #424242;
  --background-tertiary: #666666;
  
  --primary-color: #{mat.get-color-from-palette($DSOMM-dark-primary)};

  --heatmap-filled: #007700;
  --heatmap-disabled: #666666;
  --heatmap-background: #bbbbbb;
  --heatmap-stroke: #000000;
  --heatmap-cursor-hover: #145e14;
  --heatmap-cursor-selected: #232323;
  
  --dependency-link: #bbbbbb;
  --dependency-border: #0e1b0e;
  --dependency-mainnode-fill: rgb(107, 190, 107); 
  --dependency-predecessor-fill: rgb(172, 206, 172); 
  --dependency-successor-fill: rgb(192, 192, 192);

  .title-button,
  h1, h2, h3, h4, h5, h6 {
    color: map-get($custom-dark-theme, text);
  }

  // General properties
  p, li, tr {
    color: #e0e0e0;
  }

  b {
    font-weight: 400;
  }

  // Common containers
  mat-card,
  .mat-dialog-container,
  .mat-expansion-panel,
  .mat-accordion,
  .overlay-wrapper {
    background-color: #2c2c2c;
    color: #e0e0e0;
  }

  // Dialog styling
  .mat-dialog-container {
    border: 1px solid #444;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.7);
  }

  // Modal override
  .overlay-modal {
    background-color: #2c2c2c;
    color: #e0e0e0;
    border-radius: 6px;

    mat-card {
      background-color: transparent;
    }

    h1, h2, h3, h4, h5, h6 {
      color: #e0e0e0;
    }
  }

  // Circular heatmap (radar chart)
  .circular-heat text,
  .labels.segment text {
    fill: #ffffff;
  }

  .circular-heat line,
  .circular-heat path {
    stroke: var(--heatmap-stroke);
  }

  .mat-chip.mat-standard-chip {
    color: #ababab;
  }

  .mat-chip.mat-standard-chip.mat-chip-selected.mat-primary {
    background-color: var(--primary-color);
  }
}

@include mat.all-component-themes($DSOMM-dark-theme);

.button-container {
  display: flex;
  flex-direction: column; // Vertical alignment
  gap: 10px; // Space between buttons
}

svg .cursors path {
  fill: transparent;
  pointer-events: none;
}

svg .cursors #hover {
  stroke: var(--heatmap-cursor-hover, black);
  stroke-width: 6px;
}

svg .cursors #selected {
  stroke: var(--heatmap-cursor-selected, black);
  stroke-width: 4px;
}
